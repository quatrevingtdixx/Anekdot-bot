name:  Publish Anekdot

on:
  # 谢 薪芯谐芯 蟹邪锌泻邪 (泻薪芯锌泻邪)
  workflow_dispatch:
  
  # 孝孝效小 小小:
  schedule:
    # 校  (锌薪-锌): 8:00, 13:00, 20:00 小
    - cron: '0 5 * * 1-5'    # 8:00 小 (5:00 UTC)
    - cron: '0 10 * * 1-5'   # 13:00 小 (10:00 UTC)
    - cron: '0 17 * * 1-5'   # 20:00 小 (17:00 UTC)
    
    # 蝎啸蝎  (斜-胁): 10:00, 14:00, 21:00 小
    - cron: '0 7 * * 6,0'    # 10:00 小 (7:00 UTC)
    - cron: '0 11 * * 6,0'   # 14:00 小 (11:00 UTC)
    - cron: '0 18 * * 6,0'   # 21:00 小 (18:00 UTC)

jobs:
  publish-anekdot:
    runs-on: ubuntu-latest
    
    steps:
    - name:  Checkout code
      uses: actions/checkout@v4
    
    - name:  Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name:  Install dependencies
      run: pip install python-telegram-bot
    
    - name:  Run Telegram Bot
      env:
        BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
        CHANNEL_ID: ${{ secrets.CHANNEL_ID }}
        MY_CHAT_ID: ${{ secrets.MY_CHAT_ID }}
      run: python bot.py
